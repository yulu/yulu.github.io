<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>{% if page.title %}{{ page.title }} | {{ site.title}} {% else %}{{ site.title }}{% endif %}</title>
    {% if page.summary %}
    <meta name="description" content="{{ page.summary }}">
    {% else %}
    <meta name="description" content="{{ site.description }}">
    {% endif %}

    <link rel="stylesheet" href="{{ '/css/main.css' | prepend: site.baseurl }}">
    <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href="{{ '/css/nav.css' | prepend: site.baseurl }}" type="text/css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>

    <!-- MathJax for LaTeX rendering (necessary) -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

    <!-- Cookie Consent -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@3.0.1/dist/cookieconsent.css">
    <style>
    #cc-main .cm {
        max-width: none !important;
        width: 100% !important;
        border-radius: 0 !important;
        box-shadow: 0 -1px 3px rgba(0,0,0,0.1) !important;
        padding: 8px 15px !important;
        background: rgba(55, 45, 74, 0.95) !important;
    }
    #cc-main .cm__body {
        padding: 0 !important;
        display: flex;
        align-items: center;
        gap: 15px;
    }
    #cc-main .cm__texts {
        flex: 1;
        padding: 0 !important;
    }
    #cc-main .cm__title {
        display: none !important;
    }
    #cc-main .cm__desc {
        font-size: 11px !important;
        line-height: 1.3 !important;
        color: rgba(255,255,255,0.7) !important;
        margin: 0 !important;
    }
    #cc-main .cm__btns {
        padding: 0 !important;
        display: flex;
        gap: 8px;
    }
    #cc-main .cm__btn {
        font-size: 11px !important;
        padding: 5px 12px !important;
        border-radius: 3px !important;
        min-height: auto !important;
    }
    #cc-main .cm__btn--secondary {
        background: transparent !important;
        border: 1px solid rgba(255,255,255,0.3) !important;
        color: rgba(255,255,255,0.7) !important;
    }
    #cc-main .cm__footer {
        display: none !important;
    }
    </style>
    <script defer src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@3.0.1/dist/cookieconsent.umd.js"></script>
    <script defer>
    window.addEventListener('load', function() {
        CookieConsent.run({
            guiOptions: {
                consentModal: {
                    layout: 'bar inline',
                    position: 'bottom'
                },
                preferencesModal: {
                    layout: 'box'
                }
            },
            categories: {
                necessary: {
                    enabled: true,
                    readOnly: true
                },
                analytics: {
                    enabled: false,
                    autoClear: {
                        cookies: [
                            { name: /^_ga/ },
                            { name: '_gid' }
                        ]
                    }
                },
                advertising: {
                    enabled: false,
                    autoClear: {
                        cookies: [
                            { name: /^_gcl/ },
                            { name: 'IDE' },
                            { name: 'test_cookie' }
                        ]
                    }
                }
            },
            language: {
                default: 'en',
                translations: {
                    en: {
                        consentModal: {
                            title: 'We use cookies',
                            description: 'This website uses cookies to enhance your browsing experience, provide personalized ads, and analyze site traffic. You can choose which cookies to allow.',
                            acceptAllBtn: 'Accept all',
                            acceptNecessaryBtn: 'Reject all',
                            showPreferencesBtn: 'Manage preferences'
                        },
                        preferencesModal: {
                            title: 'Cookie Preferences',
                            acceptAllBtn: 'Accept all',
                            acceptNecessaryBtn: 'Reject all',
                            savePreferencesBtn: 'Save preferences',
                            sections: [
                                {
                                    title: 'Necessary Cookies',
                                    description: 'These cookies are essential for the website to function properly.',
                                    linkedCategory: 'necessary'
                                },
                                {
                                    title: 'Analytics Cookies',
                                    description: 'These cookies help us understand how visitors interact with the website by collecting anonymous information.',
                                    linkedCategory: 'analytics'
                                },
                                {
                                    title: 'Advertising Cookies',
                                    description: 'These cookies are used to show you relevant ads and measure ad campaign effectiveness.',
                                    linkedCategory: 'advertising'
                                }
                            ]
                        }
                    }
                }
            },
            onConsent: function() {
                if(CookieConsent.acceptedCategory('analytics')) {
                    loadGoogleTagManager();
                }
                if(CookieConsent.acceptedCategory('advertising')) {
                    loadAddThis();
                }
            },
            onChange: function() {
                if(CookieConsent.acceptedCategory('analytics')) {
                    loadGoogleTagManager();
                }
                if(CookieConsent.acceptedCategory('advertising')) {
                    loadAddThis();
                }
            }
        });
    });

    // Load Google Tag Manager
    function loadGoogleTagManager() {
        if(window.gtmLoaded) return;
        window.gtmLoaded = true;
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-PB2VMZMH');
    }

    // Load AddThis
    function loadAddThis() {
        if(window.addthisLoaded) return;
        window.addthisLoaded = true;
        var script = document.createElement('script');
        script.src = '//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-551ec72a4d0e58c1';
        script.async = true;
        document.head.appendChild(script);
    }
    </script>

    <meta name="google-site-verification" content="x60nHOyc_rEQN3p4MCF7G6h-7Yvng4iMYB06RrSZNS4" />
</head>
